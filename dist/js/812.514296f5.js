"use strict";(self["webpackChunkvue_mall"]=self["webpackChunkvue_mall"]||[]).push([[812],{3167:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"home"}},[t("NavBar",{staticClass:"home_navbar"},[t("div",{attrs:{slot:"center"},slot:"center"},[e._v("购物街")])]),t("TabControl",{directives:[{name:"show",rawName:"v-show",value:e.isTabFixed,expression:"isTabFixed"}],ref:"tabControlRef2",staticClass:"tabcontrol2",attrs:{titles:["流行","新款","精选"]},on:{tabClick:e.tabClick}}),t("Scroll",{ref:"scrollRef",staticClass:"content",attrs:{probeType:3,pullUpLoad:!0},on:{scroll:e.scrollPosition,pullingUp:e.pullingUp}},[t("homeSwiper",{attrs:{banner:e.banner.list}}),t("Recommand",{attrs:{recommend:e.recommend.list}}),t("FeatureWeek"),t("TabControl",{directives:[{name:"show",rawName:"v-show",value:!e.isTabFixed,expression:"!isTabFixed"}],ref:"tabControlRef1",attrs:{titles:["流行","新款","精选"]},on:{tabClick:e.tabClick}}),t("GoodsList",{attrs:{goods:e.goods[e.currentType].list}})],1),t("BackTop",{directives:[{name:"show",rawName:"v-show",value:e.isBackToShow,expression:"isBackToShow"}],nativeOn:{click:function(t){return e.backTop.apply(null,arguments)}}})],1)},a=[],o=(s(7658),s(6131)),i=s(1595),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-control"},e._l(e.titles,(function(s,r){return t("div",{key:r,staticClass:"tab-control-item",class:{active:r===e.currentIdx},on:{click:function(t){return e.clickTab(r)}}},[t("span",[e._v(e._s(s))])])})),0)},l=[],c={name:"TabControl",props:{titles:{type:Array}},data(){return{currentIdx:0}},methods:{clickTab(e){this.currentIdx=e,this.$emit("tabClick",e)}}},u=c,d=s(1001),p=(0,d.Z)(u,n,l,!1,null,"6ef66f2a",null),m=p.exports,h=s(1331),f=function(){var e=this,t=e._self._c;return t("Swiper",e._l(e.banner,(function(s,r){return t("swiper-item",{key:r},[t("a",{attrs:{href:s.link}},[t("img",{attrs:{src:s.image,alt:""},on:{load:e.swiperLoad}})])])})),1)},b=[],v=s(9487),w=s(9947),g={name:"homeSwiper",components:{Swiper:v.Z,SwiperItem:w.Z},props:{banner:{type:Array,default(){return[]}}},methods:{swiperLoad(){this.$bus.$emit("swiperLoad")}}},k=g,T=(0,d.Z)(k,f,b,!1,null,null,null),y=T.exports,_=function(){var e=this,t=e._self._c;return t("div",{staticClass:"recommend"},e._l(e.recommend,(function(s,r){return t("div",{key:r},[t("a",{attrs:{href:s.link}},[t("img",{attrs:{src:s.image,alt:""}}),t("p",[e._v(e._s(s.title))])])])})),0)},C=[],x={name:"recommendMode",props:{recommend:{type:Array,default(){return[]}}}},$=x,R=(0,d.Z)($,_,C,!1,null,"b2981976",null),S=R.exports,Z=function(){var e=this;e._self._c;return e._m(0)},F=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"featureWeek"},[t("a",{attrs:{href:"#"}},[t("img",{attrs:{src:s(8775),alt:""}})])])}],H={name:"featureWeek"},G=H,L=(0,d.Z)(G,Z,F,!1,null,"c1aa7cb6",null),B=L.exports,I=s(7707);function W(){return(0,I.W)({url:"/home/multidata"})}function N(e,t){return(0,I.W)({url:"/home/data",params:{type:e,page:t}})}var U=s(1987),M={name:"HomeMode",components:{NavBar:o.Z,homeSwiper:y,Recommand:S,FeatureWeek:B,TabControl:m,GoodsList:h.Z,Scroll:i.Z},created(){this.getHomeMultidata(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sell")},mounted(){this.$bus.$on("swiperLoad",(()=>{this.tabOffsetTop=this.$refs.tabControlRef1.$el.offsetTop}))},data(){return{banner:[],dKeyword:[],recommend:[],goods:{pop:{page:0,list:[]},new:{page:0,list:[]},sell:{page:0,list:[]}},currentType:"pop",tabOffsetTop:0,isTabFixed:!1,saveY:0,refreshfn:null}},methods:{async getHomeMultidata(){const{data:e}=await W();e.success&&(this.banner=e.data.banner,this.dKeyword=e.data.dKeyword,this.recommend=e.data.recommend)},async getHomeGoods(e){const t=this.goods[e].page+1,{data:s}=await N(e,t);this.goods[e].list.push(...s.data.list),this.goods[e].page++},tabClick(e){switch(e){case 0:this.currentType="pop";break;case 1:this.currentType="new";break;case 2:this.currentType="sell";break}this.$refs.tabControlRef1.currentIdx=e,this.$refs.tabControlRef2.currentIdx=e},scrollPosition(e){this.judgeBack(e),this.isTabFixed=-e.y>this.tabOffsetTop},pullingUp(){this.getHomeGoods(this.currentType)},refresh(){this.$refs.scrollRef.refresh()}},activated(){this.$refs.scrollRef.refresh(),this.$refs.scrollRef.scrollTo(0,this.saveY,0)},deactivated(){this.saveY=this.$refs.scrollRef.scroll.y},mixins:[U.t,U.U]},O=M,A=(0,d.Z)(O,r,a,!1,null,"ac8ea14c",null),K=A.exports},8775:function(e,t,s){e.exports=s.p+"img/recommend_bg.a1646d5d.jpg"}}]);
//# sourceMappingURL=812.514296f5.js.map