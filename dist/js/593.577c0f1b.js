"use strict";(self["webpackChunkvue_mall"]=self["webpackChunkvue_mall"]||[]).push([[593],{203:function(t,s,e){e.r(s),e.d(s,{default:function(){return It}});var o=function(){var t=this,s=t._self._c;return s("div",{staticClass:"detail"},[s("DetailNavbar",{ref:"navbarRef",attrs:{titles:[" 商品","参数","评论","推荐"]},on:{navbarClick:t.navbarClick}}),s("Scroll",{ref:"scrollRef",staticClass:"content",attrs:{probeType:3},on:{scroll:t.detailScroll}},[s("DetailSwiper",{attrs:{topImages:t.topImages}}),s("DetailBaseInfo",{attrs:{goodsInfo:t.goodsInfo}}),s("DetailShopInfo",{attrs:{shopInfo:t.shopInfo}}),s("DetailGoodsDesc",{attrs:{goodDesc:t.goodDesc}}),s("DetailItemParams",{ref:"itemParamsRef",attrs:{itemParams:t.itemParams}}),s("DetailComment",{ref:"itemCommentRef",attrs:{detailComment:t.detailComment}}),s("DetailRecommend",{ref:"itemRecommendRef",attrs:{recommendList:t.recommendList}})],1),s("DetailBottomBar",{on:{addcart:t.addcart}}),s("BackTop",{directives:[{name:"show",rawName:"v-show",value:t.isBackToShow,expression:"isBackToShow"}],nativeOn:{click:function(s){return t.backTop.apply(null,arguments)}}})],1)},i=[],a=e(7707);function n(t){return(0,a.W)({url:"/detail",params:{iid:t}})}function r(){return(0,a.W)({url:"/recommend"})}var l=e(3822),c=e(1595),d=e(1987),m=function(){var t=this,s=t._self._c;return s("NavBar",{staticStyle:{"background-color":"#fff"},scopedSlots:t._u([{key:"left",fn:function(){return[s("span",{on:{click:t.toBack}},[t._v(" < ")])]},proxy:!0},{key:"center",fn:function(){return[s("ul",{staticClass:"detail_nav_bar"},t._l(t.titles,(function(e,o){return s("li",{key:o,class:{active:t.currentIdx===o},on:{click:function(s){return t.navbarClick(o)}}},[t._v(t._s(e))])})),0)]},proxy:!0}])})},f=[],u=e(6131),_={name:"detailNavbar",components:{NavBar:u.Z},props:{titles:{type:Array,default(){return[]}}},data(){return{currentIdx:0}},methods:{toBack(){this.$router.back()},navbarClick(t){this.currentIdx=t,this.$emit("navbarClick",t)}}},p=_,v=e(1001),h=(0,v.Z)(p,m,f,!1,null,"555c15c7",null),g=h.exports,C=function(){var t=this,s=t._self._c;return s("Swiper",{staticClass:"detail_swiper"},t._l(t.topImages,(function(t,e){return s("SwiperItem",{key:e},[s("img",{attrs:{src:t}})])})),1)},I=[],b=e(9487),k=e(9947),y={name:"detailSwiper",props:{topImages:{type:Array,default(){return[]}}},components:{Swiper:b.Z,SwiperItem:k.Z}},D=y,x=(0,v.Z)(D,C,I,!1,null,"1deff434",null),$=x.exports,P=function(){var t=this,s=t._self._c;return t.goodsInfo?s("div",{staticClass:"good_info"},[s("h3",{staticClass:"good_title"},[t._v(t._s(t.goodsInfo.title))]),s("div",{staticClass:"good_price"},[s("span",{staticClass:"good_newPrice"},[t._v(t._s(t.goodsInfo.newPrice))]),s("span",{staticClass:"good_oldPrice"},[t._v(t._s(t.goodsInfo.oldPrice))]),t.goodsInfo.discount?s("span",{staticClass:"good_discount",style:t.discountBgc},[t._v(t._s(t.goodsInfo.discount))]):t._e()]),s("div",{staticClass:"info_other"},[s("span",[t._v(t._s(t.goodsInfo.columns[0]))]),s("span",[t._v(t._s(t.goodsInfo.columns[1]))]),s("span",[t._v(t._s(t.goodsInfo.services[t.goodsInfo.services.length-1].name))])]),s("div",{staticClass:"info_services"},t._l(t.goodsInfo.services.length-1,(function(e){return s("span",{key:e},[s("img",{attrs:{src:t.goodsInfo.services[e-1].icon}}),s("span",[t._v(t._s(t.goodsInfo.services[e-1].name))])])})),0)]):t._e()},w=[],B={name:"detailBaseInfo",props:{goodsInfo:{type:Object,default(){return{}}}},computed:{discountBgc(){return"background-color:"+this.goodsInfo.discountBgColor}}},R=B,S=(0,v.Z)(R,P,w,!1,null,"1a9c6e8b",null),T=S.exports,Z=function(){var t=this,s=t._self._c;return t.shopInfo?s("div",{staticClass:"shopInfo"},[s("div",{staticClass:"shop_top"},[s("img",{attrs:{src:t.shopInfo.logo,alt:""}}),s("span",[t._v(t._s(t.shopInfo.name))])]),s("div",{staticClass:"shop_middle"},[s("div",{staticClass:"left middle_item"},[s("div",{staticClass:"goods_sell"},[s("span",[t._v(t._s(t._f("sellsFilters")(t.shopInfo.sells)))]),s("p",[t._v("总销量")])]),s("div",{staticClass:"goods_count"},[s("span",[t._v(t._s(t.shopInfo.goodsCount))]),s("p",[t._v("全部宝贝")])])]),s("div",{staticClass:"right middle_item"},[s("table",t._l(t.shopInfo.score,(function(e,o){return s("tr",{key:o},[s("td",[t._v(t._s(e.name))]),s("td",{staticClass:"text_color score",class:{better_text_color:e.isBetter}},[t._v(t._s(e.score))]),s("td",{staticClass:"bgc_color",class:{better_bgc_color:e.isBetter}},[t._v(t._s(e.isBetter?"高":"低"))])])})),0)])]),t._m(0)]):t._e()},L=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"shop_bottom"},[s("button",[t._v("进店逛逛")])])}],N={name:"detailShopInfo",props:{shopInfo:{type:Object,default(){return{}}}},filters:{sellsFilters(t){let s=t;return t>1e4&&(s=(t/1e4).toFixed(1)+"万"),s}}},G=N,j=(0,v.Z)(G,Z,L,!1,null,"3cd7d1b2",null),O=j.exports,Y=function(){var t=this,s=t._self._c;return t.goodDesc?s("div",{staticClass:"goods_desc"},[s("div",{staticClass:"info_desc"},[s("div",{staticClass:"desc_start"}),s("div",{staticClass:"desc"},[t._v(t._s(t.goodDesc.desc))]),s("div",{staticClass:"desc_end"})]),t._l(t.goodDesc.detailImage,(function(e,o){return s("div",{key:o},[s("div",{staticClass:"info_key"},[t._v(t._s(e.key))]),s("div",{staticClass:"info_list"},t._l(e.list,(function(o,i){return s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:o,expression:"item1"}],key:i,on:{load:function(s){return t.imgLoad(i,e.list.length)}}})})),0)])}))],2):t._e()},F=[],A={name:"detailGoodsDesc",props:{goodDesc:{type:Object,default(){return{}}}},methods:{imgLoad(t,s){t===s-1&&this.$bus.$emit("refresh")}}},z=A,W=(0,v.Z)(z,Y,F,!1,null,"47217858",null),M=W.exports,U=function(){var t=this,s=t._self._c;return t.itemParams?s("div",{staticClass:"item_params"},[s("table",{staticClass:"item_rule"},t._l(t.itemParams.rule.tables[0],(function(e,o){return s("tr",{key:o},t._l(e,(function(e,o){return s("td",{key:o},[t._v(t._s(e))])})),0)})),0),s("table",{staticClass:"item_info"},t._l(t.itemParams.info.set,(function(e,o){return s("tr",{key:o},[s("td",{staticClass:"key"},[t._v(t._s(e.key))]),s("td",{staticClass:"value"},[t._v(t._s(e.value))])])})),0),t.itemParams.info.images?s("div",{staticClass:"info_img"},[s("img",{attrs:{src:t.itemParams.info.images[0],alt:""}})]):t._e()]):t._e()},q=[],E={name:"detailItemParams",props:{itemParams:{type:Object,default(){return{}}}}},H=E,J=(0,v.Z)(H,U,q,!1,null,"74d16fb5",null),K=J.exports,Q=function(){var t=this,s=t._self._c;return t.detailComment?s("div",{staticClass:"detail_Comment"},[s("div",{staticClass:"comment_header"},[s("div",{staticClass:"title"},[t._v("用户评价")]),s("div",{staticClass:"more"},[t._v("更多("+t._s(t.detailComment.cRate)+")>")])]),s("div",{staticClass:"comment_user"},[s("img",{attrs:{src:t.commentInfo.user.avatar,alt:""}}),s("span",[t._v(t._s(t.commentInfo.user.uname))])]),s("div",{staticClass:"comment_info"},[s("p",[t._v(t._s(t.commentInfo.content))]),s("div",{staticClass:"info_detail"},[s("span",{staticClass:"data"},[t._v(t._s(t.createTime))]),s("span",{staticClass:"style"},[t._v(t._s(t.commentInfo.style))])]),t.commentInfo.images?s("div",{staticClass:"info_img"},t._l(t.commentInfo.images,(function(t,e){return s("img",{key:e,attrs:{src:t,alt:""}})})),0):t._e()])]):t._e()},V=[],X=e(7214),tt={name:"detailComment",props:{detailComment:{type:Object,default(){return{}}}},computed:{commentInfo(){return this.detailComment.list[0]},createTime(){return(0,X.d)(this.commentInfo.created)}}},st=tt,et=(0,v.Z)(st,Q,V,!1,null,"d881c9dc",null),ot=et.exports,it=function(){var t=this,s=t._self._c;return t.recommendList?s("div",{staticClass:"detail_recommend"},[s("GoodsList",{attrs:{goods:t.recommendList}})],1):t._e()},at=[],nt=e(1331),rt={name:"detailRecommend",props:{recommendList:{type:Array,default(){return[]}}},components:{GoodsList:nt.Z}},lt=rt,ct=(0,v.Z)(lt,it,at,!1,null,"121ec964",null),dt=ct.exports,mt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"bottom_bar"},[t._m(0),s("div",{staticClass:"right"},[s("div",{staticClass:"cart",on:{click:t.addCart}},[t._v("加入购物车")]),s("div",{staticClass:"buy"},[t._v("购买")])])])},ft=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"left"},[s("div",[s("div",{staticClass:"icon sevices"}),s("span",{staticClass:"text"},[t._v("客服")])]),s("div",[s("div",{staticClass:"icon shop"}),s("span",{staticClass:"text"},[t._v("店铺")])]),s("div",[s("div",{staticClass:"icon fav"}),s("span",{staticClass:"text"},[t._v("收藏")])])])}],ut={name:"detailBottomBar",methods:{addCart(){this.$emit("addcart"),this.$toast.show("成功加入购物车",1500)}}},_t=ut,pt=(0,v.Z)(_t,mt,ft,!1,null,"3cd71a3b",null),vt=pt.exports,ht={name:"detailMode",data(){return{iid:this.$route.params.id,topImages:null,goodsInfo:null,shopInfo:null,goodDesc:null,itemParams:null,detailComment:null,recommendList:null,toScrollY:0,currentIdx:0}},created(){this.getGoodDetail(),this.getRecommend()},mounted(){this.$bus.$on("refresh",this.refresh)},destroyed(){this.$bus.$off("refresh",this.refresh)},computed:{...(0,l.rn)(["cartList"])},methods:{async getGoodDetail(){const{data:t}=await n(this.iid);this.topImages=t.result.itemInfo.topImages;const s=t.result;this.goodsInfo={title:s.itemInfo.title,desc:s.itemInfo.desc,newPrice:s.itemInfo.price,lowPrice:s.itemInfo.lowNowPrice,oldPrice:s.itemInfo.oldPrice,discount:s.itemInfo.discountDesc,discountBgColor:s.itemInfo.discountBgColor,columns:s.columns,services:s.shopInfo.services,realPrice:s.itemInfo.lowNowPrice},this.shopInfo={logo:s.shopInfo.shopLogo,name:s.shopInfo.name,fans:s.shopInfo.cFans,sells:s.shopInfo.cSells,score:s.shopInfo.score,goodsCount:s.shopInfo.cGoods},this.goodDesc=s.detailInfo,this.itemParams=s.itemParams,this.detailComment=s.rate},async getRecommend(){const{data:t}=await r();if(!t.success)return alert("获取推荐列表失败");this.recommendList=t.data.list},detailScroll(t){const s=-t.y;this.judgeBack(t),s>=0&&s<this.$refs.itemParamsRef.$el.offsetTop?this.currentIdx=0:s>=this.$refs.itemParamsRef.$el.offsetTop&&s<this.$refs.itemCommentRef.$el.offsetTop?this.currentIdx=1:s>=this.$refs.itemCommentRef.$el.offsetTop&&s<this.$refs.itemRecommendRef.$el.offsetTop?this.currentIdx=2:this.currentIdx=3,this.$refs.navbarRef.currentIdx=this.currentIdx},refresh(){try{this.$refs.scrollRef.refresh()}catch{}},navbarClick(t){switch(t){case 0:this.toScrollY=0;break;case 1:this.toScrollY=this.$refs.itemParamsRef.$el.offsetTop;break;case 2:this.toScrollY=this.$refs.itemCommentRef.$el.offsetTop;break;case 3:this.toScrollY=this.$refs.itemRecommendRef.$el.offsetTop;break}this.$refs.scrollRef.scrollTo(0,-this.toScrollY,500)},addcart(){const t={};t.image=this.topImages[0],t.title=this.goodsInfo.title,t.desc=this.goodsInfo.desc,t.price=this.goodsInfo.lowPrice,t.iid=this.iid,t.ischeck=!1,this.$store.dispatch("addCart",t)}},components:{DetailNavbar:g,DetailSwiper:$,DetailBaseInfo:T,Scroll:c.Z,DetailShopInfo:O,DetailGoodsDesc:M,DetailItemParams:K,DetailComment:ot,DetailRecommend:dt,DetailBottomBar:vt},mixins:[d.U]},gt=ht,Ct=(0,v.Z)(gt,o,i,!1,null,"52b5a7c4",null),It=Ct.exports}}]);
//# sourceMappingURL=593.577c0f1b.js.map